
clear
close all
clc

%%

D = 2;

lb = -2*ones(1,D);
ub = 2*ones(1,D);

tic

V0 = lb + (ub - lb).*lhsdesign(D,1)';

func = @(x) customFunc(x);

%%

%GaussNewton

V = V0;

opt1 = optim.GaussNewton();

for i = 1:2000
    
    Vi(:,i) = V;

    [f, J] = AutoDifffuncAndJac(func, V);
    [opt1,V] = opt1.step(V,f,J);

    e(:,i) = f;
    
end

time_diff = toc

V1 = Vi;
e1 = e;

%%

function r = customFunc(x)

r(1) = x(1) + x(2).^2;
r(2) = (x(1) - x(2)).^2 + x(2).^3; 

end